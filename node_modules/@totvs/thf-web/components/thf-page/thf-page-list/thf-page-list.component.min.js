var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){t(e,o);function i(){this.constructor=e}e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();import{Component,ViewContainerRef,Renderer}from"@angular/core";import{Router}from"@angular/router";import{callFunction}from"@totvs/thf-core/utils";import{ThfPageListBaseComponent}from"@totvs/thf-core/components/thf-page-base";var ThfPageListComponent=function(t){__extends(e,t);function e(e,o,i){var n=t.call(this)||this;return n.viewRef=e,n.renderer=o,n.router=i,n.limitPrimaryActions=3,n.maxWidthMobile=480,n.callFunction=callFunction,n.parentRef=e._view.component,n}return e.prototype.ngAfterContentInit=function(){var t=this;this.setIsMobile(),this.setDropdownActions(),this.renderer.listenGlobal("window","resize",function(e){t.onResize(e)})},e.prototype.ngOnChanges=function(t){this.setDropdownActions()},e.prototype.callAction=function(t){t.url?this.router.navigate([t.url]):t.action&&callFunction(t.action,this.parentRef)},e.prototype.onResize=function(t){t.target.innerWidth<this.maxWidthMobile?(this.isMobile=!0,this.limitPrimaryActions=2,this.setDropdownActions()):(this.isMobile=!1,this.limitPrimaryActions=3,this.setDropdownActions())},e.prototype.setIsMobile=function(){window.innerWidth<this.maxWidthMobile&&(this.isMobile=!0,this.limitPrimaryActions=2)},e.prototype.setDropdownActions=function(){this.actions.length>this.limitPrimaryActions&&(this.dropdownActions=this.actions.slice(this.limitPrimaryActions-1))},e.prototype.callActionFilter=function(t){this.callFunction(this.filter[t],this.parentRef)},e.prototype.onkeypress=function(t){13===t&&this.callActionFilter("action")},e.prototype.changeModel=function(t){this.parentRef[this.filter.ngModel]=t},e.decorators=[{type:Component,args:[{selector:"thf-page-list",template:'<thf-page> \x3c!-- HEADER --\x3e <thf-page-header [t-title]="title"> \x3c!-- OPERATIONS --\x3e <div class="thf-page-header-row"> <div class="thf-page-list-actions"> <thf-button *ngIf="actions[0]" t-primary="true" [t-label]="actions[0].label" (t-click)="callAction(actions[0])" [t-disabled]="actions[0].disabled" [t-icon]="actions[0].icon"> </thf-button> <thf-button *ngIf="actions[1] && (actions.length === 2 || !isMobile)" [t-label]="actions[1].label" [t-disabled]="actions[1].disabled" (t-click)="callAction(actions[1])" [t-icon]="actions[1].icon"> </thf-button> <thf-button *ngIf="actions.length == 3 && actions[2] && !isMobile" [t-label]="actions[2].label" (t-click)="callAction(actions[2])" [t-disabled]="actions[2].disabled" [t-icon]="actions[2].icon"> </thf-button> <thf-dropdown *ngIf="actions.length > limitPrimaryActions" t-label="Outras ações" [t-actions]="dropdownActions"> </thf-dropdown> </div> \x3c!-- FILTER --\x3e <div class="thf-page-list-filter-content" *ngIf="filter"> <div class="thf-page-list-filter-wrapper"> <div class="thf-page-list-filter"> <span class="thf-icon thf-icon-search thf-page-list-icon-search" (click)="callActionFilter(\'action\')"> </span> <input type="text" class="thf-input" [ngModel]="parentRef[filter.ngModel]" (ngModelChange)="changeModel($event)" name="model" [placeholder]="filter.placeholder" (keypress)="onkeypress($event.keyCode)"> </div> <div class="thf-page-list-filter-search" *ngIf="filter.advancedAction"> <a class="thf-page-list-filter-search-link" (click)="callActionFilter(\'advancedAction\')"> Busca avançada </a> </div> </div> </div> </div> </thf-page-header> \x3c!-- CONTENT --\x3e <thf-page-content> <ng-content> </ng-content> </thf-page-content> </thf-page> '}]}],e.ctorParameters=function(){return[{type:ViewContainerRef},{type:Renderer},{type:Router}]},e}(ThfPageListBaseComponent);export{ThfPageListComponent};function ThfPageListComponent_tsickle_Closure_declarations(){ThfPageListComponent.decorators,ThfPageListComponent.ctorParameters,ThfPageListComponent.prototype.limitPrimaryActions,ThfPageListComponent.prototype.dropdownActions,ThfPageListComponent.prototype.isMobile,ThfPageListComponent.prototype.maxWidthMobile,ThfPageListComponent.prototype.parentRef,ThfPageListComponent.prototype.callFunction,ThfPageListComponent.prototype.viewRef,ThfPageListComponent.prototype.renderer,ThfPageListComponent.prototype.router}