!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/router"),require("@angular/common"),require("@totvs/thf-core/components/thf-menu-base")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/router","@angular/common","@totvs/thf-core/components/thf-menu-base"],n):n(e["thf-menu"]={},e.core,e.router,e.common,e.thfMenuBase)}(this,function(e,n,t,i,u){"use strict";var o=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){e(n,t);function i(){this.constructor=n}n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),s=function(e){o(u,e);function u(n,i,u,o){var s=e.call(this)||this;return s.elementRef=n,s.viewRef=i,s.location=u,s.router=o,s.parentRef=i._view.component,s.router.events.subscribe(function(e){e instanceof t.NavigationEnd&&s.checkActiveMenuByUrl(s.location.path())}),s}return u.prototype.ngOnInit=function(){var e=this;this.validateMenus(),setTimeout(function(){e.checkActiveMenuByUrl(e.location.path())})},u.prototype.validateMenus=function(){this.menus.forEach(function(e){if(""===e.label.trim())throw new Error("O atributo ThfMenuItem.label não pode ser vazio.");e.subItems&&e.subItems.forEach(function(e){if(""===e.label.trim())throw new Error("O atributo ThfMenuItem.label não pode ser vazio.")})})},u.prototype.clickMenuItem=function(e){this.menuMobileOpened=!1,this.isExternalLink(e.link)&&this.openExternalLink(e.link),e.action&&this.executeMenuAction(e),e.link&&!this.isExternalLink(e.link)&&(this.menuItemActive=e,this.menuItemOpened=void 0)},u.prototype.clickMenuItemGrouped=function(e){this.menuItemOpened=this.menuItemOpened===e?void 0:e},u.prototype.clickSubMenuItem=function(e){this.menuMobileOpened=!1,this.isExternalLink(e.link)&&this.openExternalLink(e.link),e.action&&this.executeMenuAction(e),e.link&&!this.isExternalLink(e.link)&&(this.menuItemActive=e)},u.prototype.toggleMenuMobile=function(){this.menuMobileOpened=!this.menuMobileOpened},u.prototype.isMenuItemSelected=function(e){return this.menuItemActive===e&&this.menuItemActive!==this.menuItemOpened||e!==this.menuItemOpened&&e.subItems&&e.subItems.includes(this.menuItemActive)},u.prototype.checkActiveMenuByUrl=function(e){this.linkActive&&this.linkActive===e||this.setActiveMenuByUrl(e)},u.prototype.checkUrl=function(e){var n="";return e.link&&(n=e.link.replace(/^(\.)+/g,"")),n.startsWith("/")||(n="/".concat(n)),n},u.prototype.setActiveMenuByUrl=function(e){var n=this;this.menus.some(function(t){if(n.checkUrl(t)===e)return setTimeout(function(){n.menuItemActive=t,n.linkActive=n.menuItemActive.link,n.menuItemOpened=void 0}),!0;if(t.subItems){var i=t.subItems.find(function(t){return n.checkUrl(t)===e});i&&setTimeout(function(){return n.menuItemActive=i,n.menuItemOpened=t,n.linkActive=n.menuItemActive.link,!0})}})},u.prototype.executeMenuAction=function(e){"string"==typeof e.action?this.parentRef[e.action](e):e.action.call(this.parentRef,e)},u.prototype.openExternalLink=function(e){window.open(e,"_blank")},u.prototype.isExternalLink=function(e){if(e)return e.startsWith("http")},u.decorators=[{type:n.Component,args:[{selector:"thf-menu",template:'<div *ngIf="menuMobileOpened" class="thf-menu-overlay" (click)="toggleMenuMobile()"></div> <div class="thf-menu-mobile thf-clickable" (click)="toggleMenuMobile()"> <span class="thf-icon thf-icon-menu"></span> </div> <div class="thf-menu" [ngClass]="{ \'thf-menu-animation\' : menuMobileOpened }"> <a href="/" class="thf-menu-logo-container"> <div class="thf-menu-logo"></div> </a> <nav class="thf-menu-container"> \x3c!-- Inner e outer para esconder scroll --\x3e <div class="thf-menu-outer"> <div class="thf-menu-inner"> <div *ngFor="let menu of menus" class="thf-menu-item-wrapper"> \x3c!-- item de menu não selecionado sem agrupamento --\x3e <a *ngIf="!menu.subItems && !this.isExternalLink(menu.link) && menu.link" class="thf-menu-item-link" (click)="clickMenuItem(menu)" [routerLink]="menu.link"> <div [ngClass]="{\'thf-menu-item\': true, \'thf-menu-item-selected\': menuItemActive === menu}"> {{ menu.label }} </div> </a> <a *ngIf="!menu.subItems && (this.isExternalLink(menu.link) || !menu.link)" class="thf-menu-item-link" (click)="$event.preventDefault();clickMenuItem(menu);" [href]="menu.link ? menu.link : \'javascript:;\'"> <div [ngClass]="{\'thf-menu-item\': true, \'thf-menu-item-selected\': menuItemActive === menu}"> {{ menu.label }} </div> </a> \x3c!-- item de menu com sub itens --\x3e <div *ngIf="menu.subItems"> <div (click)="clickMenuItemGrouped(menu)" class="thf-menu-item thf-clickable" [ngClass]="{ \'thf-menu-item-selected\': isMenuItemSelected(menu), \'thf-menu-item-grouper-up\': menu === menuItemOpened }"> \x3c!-- menu agrupado fechado --\x3e <div *ngIf="menu !== menuItemOpened" class="thf-menu-grouper-icon-down"> <span class="thf-icon thf-icon-arrow-down"></span> </div> \x3c!-- menu agrupado aberto --\x3e <div *ngIf="menu === menuItemOpened" class="thf-menu-grouper-icon-up"> <span class="thf-icon thf-icon-arrow-up"></span> </div> {{ menu.label }} </div> \x3c!-- sub itens menu agrupado --\x3e <div [ngClass]="{ \'thf-menu-sub-items-visible\': menu === menuItemOpened }" class="thf-menu-sub-items"> <div *ngFor="let subMenu of menu.subItems"> <a *ngIf="!this.isExternalLink(subMenu.link) && subMenu.link" class="thf-menu-item-link" [routerLink]="subMenu.link" (click)="clickSubMenuItem(subMenu)"> <div [ngClass]="{\'thf-menu-item\': true, \'thf-menu-item-selected\': menuItemActive === subMenu}"> {{ subMenu.label }} </div> </a> <a *ngIf="(this.isExternalLink(subMenu.link) || !subMenu.link)" class="thf-menu-item-link" [href]="subMenu.link ? subMenu.link : \'javascript:;\'" (click)="$event.preventDefault(); clickSubMenuItem(subMenu);"> <div [ngClass]="{\'thf-menu-item\': true, \'thf-menu-item-selected\': menuItemActive === subMenu}"> {{ subMenu.label }} </div> </a> </div> </div> </div> </div> </div> </div> </nav> </div> '}]}],u.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ViewContainerRef},{type:i.Location},{type:t.Router}]},u}(u.ThfMenuBaseComponent),c=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule,t.RouterModule],declarations:[s],exports:[s]}]}],e.ctorParameters=function(){return[]},e}();e.ThfMenuModule=c,Object.defineProperty(e,"__esModule",{value:!0})});