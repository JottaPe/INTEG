!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common/http"),require("rxjs/add/operator/do")):"function"==typeof define&&define.amd?define(["exports","@angular/common/http","rxjs/add/operator/do"],e):e(t["thf-http-interceptor-base"]={},t.http)}(this,function(t,e){"use strict";var o={};o.Bottom=0,o.Top=1,o[o.Bottom]="Bottom",o[o.Top]="Top";var i=function(){function t(t,e){this.notification=t,this.dialog=e,this.notificationTypes=["success","warning","error","information"]}return t.prototype.intercept=function(t,o){var i=this;return o.handle(t).do(function(t){t instanceof e.HttpResponse&&i.processResponse(t)},function(t){i.processErrorResponse(t)})},t.prototype.processResponse=function(t){var e=this;if(t.body&&t.body.totvs_messages){var o=t.body.totvs_messages;o instanceof Array?o.forEach(function(t){e.showNotification(t)}):this.showNotification(o)}},t.prototype.processErrorResponse=function(t){var e=t.error;e&&e.message&&this.showErrorNotification(e)},t.prototype.showNotification=function(t){this.notificationTypes.includes(t.type)&&this.notification[t.type]({message:t.detail})},t.prototype.showErrorNotification=function(t){var e=this.generateErrorNotificationAction(t);this.notification.error({message:t.message,orientation:o.Top,actionLabel:e.label,action:e.action})},t.prototype.generateErrorNotificationAction=function(t){var e,o,i=t.message.concat(t.detailedMessage);return t.details&&t.details instanceof Array&&t.details.forEach(function(t){i+="\n"+t.message}),!t.helpUrl||t.detailedMessage||t.details?(t.detailedMessage||t.details)&&(o="Detalhes",e=this.generateDialogDetailFunction(t,i)):(o="Ajuda",e=this.generateUrlHelpFunction(t.helpUrl)),{label:o,action:e}},t.prototype.generateUrlHelpFunction=function(t){return function(){window.open(t,"_blank")}},t.prototype.generateDialogDetailFunction=function(t,e){var o=this;return function(){o.dialog.alert({title:t.code,message:e,ok:t.helpUrl?o.generateUrlHelpFunction(t.helpUrl):void 0})}},t}();t.ThfHttpInterceptorBaseService=i,Object.defineProperty(t,"__esModule",{value:!0})});